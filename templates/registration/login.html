{% extends 'base.html' %}
{% block title %}ÄÄƒng nháº­p{% endblock %}

{% block content %}
<div class="container page-container">
  <div class="auth-grid">
    <div class="auth-card">
      <h2 class="auth-title">ChÃ o má»«ng trá»Ÿ láº¡i ğŸ‘‹</h2>
      <p class="auth-sub">ÄÄƒng nháº­p Ä‘á»ƒ tiáº¿p tá»¥c.</p>

      {% if form.non_field_errors %}
      <div class="alert">
        {% for error in form.non_field_errors %}
          <div>{{ error }}</div>
        {% endfor %}
      </div>
      {% endif %}

      <form method="post" class="auth-form" novalidate>
        {% csrf_token %}
        {% for field in form %}
          <div class="form-row-compact">
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            <div class="input-wrap">
              {{ field }}
              {% if field.field.widget.input_type|default:'' == 'password' %}
                <button type="button" class="btn-eye" data-toggle-password aria-label="Hiá»‡n/áº©n máº­t kháº©u">ğŸ‘</button>
              {% endif %}
            </div>
            {% if field.help_text %}
              <small class="form-hint">{{ field.help_text|safe }}</small>
            {% endif %}
            {% if field.errors %}
              <small class="error-text">
                {% for error in field.errors %}{{ error }}{% if not forloop.last %}<br/>{% endif %}{% endfor %}
              </small>
            {% endif %}
          </div>
        {% endfor %}

        <div class="between">
          <div class="remember-me"><!-- náº¿u cÃ³ checkbox remember, nÃ³ sáº½ render á»Ÿ trÃªn --></div>
          {# an toÃ n náº¿u chÆ°a cÃ³ route password_reset #}
          {% url 'password_reset' as reset_url %}
          {% if reset_url %}
            <a class="link-muted" href="{{ reset_url }}">QuÃªn máº­t kháº©u?</a>
          {% endif %}
        </div>

        <button type="submit" class="btn btn-primary btn-block">ÄÄƒng nháº­p</button>
      </form>

      <div class="auth-alt">
        <span>ChÆ°a cÃ³ tÃ i khoáº£n?</span>
        <a href="{% url 'register' %}" class="link-accent">ÄÄƒng kÃ½</a>
      </div>
    </div>

    <aside class="auth-aside">
      <h3 class="aside-title">An toÃ n & nhanh chÃ³ng</h3>
      <ul class="aside-list">
        <li>â€¢ MÃ£ hÃ³a thÃ´ng tin Ä‘Äƒng nháº­p</li>
        <li>â€¢ ÄÄƒng nháº­p báº±ng email/username</li>
        <li>â€¢ Há»— trá»£ khÃ´i phá»¥c máº­t kháº©u</li>
      </ul>
    </aside>
  </div>
</div>

<script>
  // Toggle password visibility
  document.addEventListener('click', function(e){
    const btn = e.target.closest('[data-toggle-password]');
    if(!btn) return;
    const input = btn.parentElement.querySelector('input[type="password"], input[type="text"]');
    if(!input) return;
    if(input.type === 'password'){
      input.type = 'text';
      btn.textContent = 'ğŸ™ˆ';
    }else{
      input.type = 'password';
      btn.textContent = 'ğŸ‘';
    }
  });
</script>
{% endblock %}
