{% extends 'base.html' %}
{% block title %}ÄÄƒng kÃ½{% endblock %}

{% block content %}
<div class="container page-container">
  <div class="auth-grid">
    <div class="auth-card">
      <h2 class="auth-title">Táº¡o tÃ i khoáº£n</h2>
      <p class="auth-sub">Miá»…n phÃ­ Â· HoÃ n táº¥t trong 1 phÃºt</p>

      {% if form.non_field_errors %}
      <div class="alert">
        {% for error in form.non_field_errors %}
          <div>{{ error }}</div>
        {% endfor %}
      </div>
      {% endif %}

      <form method="post" class="auth-form" novalidate>
        {% csrf_token %}
        {% for field in form %}
          <div class="form-row-compact">
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            <div class="input-wrap">
              {{ field }}
              {% if field.field.widget.input_type|default:'' == 'password' %}
                <button type="button" class="btn-eye" data-toggle-password aria-label="Hiá»‡n/áº©n máº­t kháº©u">ğŸ‘</button>
              {% endif %}
            </div>
            {% if field.help_text %}
              <small class="form-hint">{{ field.help_text|safe }}</small>
            {% endif %}
            {% if field.errors %}
              <small class="error-text">
                {% for error in field.errors %}{{ error }}{% if not forloop.last %}<br/>{% endif %}{% endfor %}
              </small>
            {% endif %}
          </div>
        {% endfor %}
        <button type="submit" class="btn btn-primary btn-block">ÄÄƒng kÃ½</button>
      </form>

      <div class="auth-alt">
        <span>ÄÃ£ cÃ³ tÃ i khoáº£n?</span>
        <a href="{% url 'login' %}" class="link-accent">ÄÄƒng nháº­p</a>
      </div>
    </div>

    <aside class="auth-aside">
      <h3 class="aside-title">Lá»£i Ã­ch khi Ä‘Äƒng kÃ½</h3>
      <ul class="aside-list">
        <li>â€¢ Theo dÃµi dá»‹ch vá»¥ vÃ  lá»‹ch sá»­ Ä‘Æ¡n hÃ ng</li>
        <li>â€¢ Nháº­n há»— trá»£ nhanh tá»« Ä‘á»™i ngÅ© CSKH</li>
        <li>â€¢ Æ¯u Ä‘Ã£i dÃ nh riÃªng cho thÃ nh viÃªn</li>
      </ul>
    </aside>
  </div>
</div>

<script>
  // Toggle password visibility (reuse from login)
  document.addEventListener('click', function(e){
    const btn = e.target.closest('[data-toggle-password]');
    if(!btn) return;
    const input = btn.parentElement.querySelector('input[type="password"], input[type="text"]');
    if(!input) return;
    if(input.type === 'password'){
      input.type = 'text';
      btn.textContent = 'ğŸ™ˆ';
    }else{
      input.type = 'password';
      btn.textContent = 'ğŸ‘';
    }
  });
</script>
{% endblock %}
